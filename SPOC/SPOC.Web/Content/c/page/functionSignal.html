<div class="functionSignal-block">
	<div class="n-block n-border-b">
		<h1 class="n-h1">
			C 库函数 - <span class="green">signal()</span>
		</h1>
		<p>
			<a href="#standardLibSignalH" class="n-text-line green back-link" data-type="back">
				<img src="/Content/c/images/up.gif"> C 标准库 - &lt;signal.h&gt;
			</a>
		</p>
		<h2 class="n-h2">
			描述
		</h2>
		<p>C 库函数 <b>void (*signal(int sig, void (*func)(int)))(int)</b> 设置一个函数来处理信号，即带有 sig 参数的信号处理程序。</p>
		<h2 class="n-h2">
			声明
		</h2>
		<p>下面是 signal() 函数的声明。</p>
		<pre>void (*signal(int sig, void (*func)(int)))(int)</pre>
		<h2 class="n-h2">
			参数
		</h2>
		<ul>
			<li>
				<b>sig</b> -- 在信号处理程序中作为变量使用的信号码。下面是一些重要的标准信号常量：
			</li>	
		</ul>
		<table class="reference notranslate">
			<thead>
				<tr><th style="width:5%">宏</th><th>信号</th></tr>
			</thead>
			<tbody>
				<tr><td>SIGABRT</td><td>(Signal Abort) 程序异常终止。</td></tr>
				<tr><td>SIGFPE</td><td>(Signal Floating-Point Exception) 算术运算出错，如除数为 0 或溢出（不一定是浮点运算）。</td></tr>
				<tr><td>SIGILL</td><td>(Signal Illegal Instruction) 非法函数映象，如非法指令，通常是由于代码中的某个变体或者尝试执行数据导致的。</td></tr>
				<tr><td>SIGINT</td><td>(Signal Interrupt) 中断信号，如 ctrl-C，通常由用户生成。</td></tr>
				<tr><td>SIGSEGV</td><td>(Signal Segmentation Violation) 非法访问存储器，如访问不存在的内存单元。</td></tr>
				<tr><td>SIGTERM</td><td>(Signal Terminate) 发送给本程序的终止请求信号。</td></tr>
			</tbody>
		</table>
		<ul>
			<li>
				<b>func</b> -- 一个指向函数的指针。它可以是一个由程序定义的函数，也可以是下面预定义函数之一：
			</li>	
		</ul>	
		<table>
			<tbody>
				<tr><td>SIG_DFL</td><td>默认的信号处理程序。</td></tr>
				<tr><td>SIG_IGN</td><td>忽视信号。</td></tr>
			</tbody>
		</table>
		<h2 class="n-h2">
			返回值
		</h2>
		<p>该函数返回信号处理程序之前的值，当发生错误时返回 SIG_ERR。</p>
		<h2 class="n-h2">
			实例
		</h2>
		<p>下面的实例演示了 signal() 函数的用法。</p>
		<div class="n-example">
			<pre><code>#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;signal.h&gt;

void sighandler(int);

int main()
{
   signal(SIGINT, sighandler);

   while(1) 
   {
      printf("开始休眠一秒钟...\n");
      sleep(1);
   }

   return(0);
}

void sighandler(int signum)
{
   printf("捕获信号 %d，跳出...\n", signum);
   exit(1);
}</code></pre>
		</div>
		<p>让我们编译并运行上面的程序，这将产生以下结果，且程序会进入无限循环，需使用 CTRL + C 键跳出程序。</p>
		<pre>开始休眠一秒钟...
开始休眠一秒钟...
开始休眠一秒钟...
开始休眠一秒钟...
开始休眠一秒钟...
捕获信号 2，跳出...</pre>
		<p>
			<a href="#standardLibSignalH" class="n-text-line green back-link" data-type="back">
				<img src="/Content/c/images/up.gif"> C 标准库 - &lt;signal.h&gt;
			</a>
		</p>
	</div>
</div>